<project name="CZM_Main" basedir="." default="main">

	<!-- Copies the schema and linux86 jre into the installation dirs -->


	<property name="schemas.dir" value="schemas" />
	<property name="images.dir" value="images" />
	<property name="ini.dir" value="ini" />

	<property name="release.linux86.dir" value="C:/dynamo/releases/linux.gtk.x86/eclipse/" />
	<property name="release.windows.dir" value="C:/dynamo/releases/win32.win32.x86/eclipse/" />

	<property name="jre.linux86.dir" value="jre/" />
	<property name="winrun4j.dir" value="WinRun4J/" />

	<target name="clean">
		<delete dir="${release.linux86.dir}${jre.linux86.dir}" />
		<delete dir="${release.windows.dir}${schemas.dir}" />
		<delete dir="${release.windows.dir}${images.dir}" />
		<delete dir="${release.windows.dir}${ini.dir}" />
		<delete dir="${release.linux86.dir}${schemas.dir}" />
		<delete dir="${release.linux86.dir}${images.dir}" />
		<delete dir="${release.linux86.dir}${ini.dir}" />
	</target>

	<target name="createdirs" depends="createschemadirs,createimagesdirs,createinidirs,createlinux86jre" />

	<target name="createschemadirs" depends="createwindowsschemadir,createlinux86schemadir" />

	<target name="createimagesdirs" depends="createwindowsimagesdir,createlinux86imagesdir" />
	
	<target name="createinidirs" depends="createwindowsinidir,createlinux86inidir" />

	<target name="createlinux86jre">
		<copy todir="${release.linux86.dir}${jre.linux86.dir}">
			<fileset dir="${jre.linux86.dir}" />
		</copy>
	</target>

	<target name="createwindowsschemadir">
		<copy todir="${release.windows.dir}${schemas.dir}">
			<fileset dir="${schemas.dir}" />
		</copy>
	</target>

	<target name="createwindowsimagesdir">
		<copy todir="${release.windows.dir}${images.dir}">
			<fileset dir="${images.dir}" />
		</copy>
	</target>

	<target name="createwindowsinidir">
		<copy todir="${release.windows.dir}${ini.dir}">
			<fileset dir="${ini.dir}" />
		</copy>
	</target>

	<target name="createlinux86schemadir">
		<copy todir="${release.linux86.dir}${schemas.dir}">
			<fileset dir="${schemas.dir}" />
		</copy>
	</target>

	<target name="createlinux86imagesdir">
		<copy todir="${release.linux86.dir}${images.dir}">
			<fileset dir="${images.dir}" />
		</copy>
	</target>

		<target name="createlinux86inidir">
			<copy todir="${release.linux86.dir}${ini.dir}">
				<fileset dir="${ini.dir}" />
			</copy>
		</target>

	<target name="createdynamohiaexec">
		<delete file="${release.windows.dir}eclipse.exe" />
		<delete file="${release.windows.dir}eclipse.ini" />
		<copy todir="${release.windows.dir}" overwrite="true">
			<fileset dir="${winrun4j.dir}" />
		</copy>
		<exec command="${release.windows.dir}DYNAMO-HIA --WinRun4J:SetIcon" />
		<exec command="${release.windows.dir}DYNAMO-HIA --WinRun4J:RegisterFileAssociations" />
	</target>

	<target name="main" depends="clean,createdirs,createdynamohiaexec" />
</project>
